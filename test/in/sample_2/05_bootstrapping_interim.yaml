---
- :key: '1'
  :contents: "`# Cluster bootstrapping`"
  :translated_contents: ''
  :original_contents: "`# Cluster bootstrapping` "
- :key: '2'
  :contents: To use HARP, a minimum amount of metadata must exist in the DCS. The  process
    of "bootstrapping" a cluster essentially means initializing node,  location, and
    other runtime configuration either all at once or on a  per-resource basis.
  :translated_contents: ''
  :original_contents: 'To use HARP, a minimum amount of metadata must exist in the
    DCS. The  process of "bootstrapping" a cluster essentially means initializing
    node,  location, and other runtime configuration either all at once or on a  per-resource
    basis. '
- :key: '3'
  :contents: This process is governed through the `harpctl apply` command. For more
    information, see edb_lk_asis_1 .
  :translated_contents: ''
  :original_contents: 'This process is governed through the `harpctl apply` command.
    For more information, see edb_lk_asis_1 . '
- :key: '4'
  :contents: Set up the DCS and make sure it is functional before bootstrapping.
  :translated_contents: ''
  :original_contents: 'Set up the DCS and make sure it is functional before bootstrapping. '
- :key: '5'
  :contents: edb_excla_notran_1 You can combine any or all of these example into a
    single YAML document and apply it all at once.
  :translated_contents: ''
  :original_contents: 'edb_excla_notran_1 You can combine any or all of these example
    into a single YAML document and apply it all at once.  '
- :key: '6'
  :contents: "## Cluster-wide bootstrapping"
  :translated_contents: ''
  :original_contents: "## Cluster-wide bootstrapping "
- :key: '7'
  :contents: Some settings are applied cluster-wide and you can specify them during  bootstrapping.
    Currently this applies only to the `event_sync_interval`  runtime directive, but
    others might be added later.
  :translated_contents: ''
  :original_contents: 'Some settings are applied cluster-wide and you can specify
    them during  bootstrapping. Currently this applies only to the `event_sync_interval`  runtime
    directive, but others might be added later. '
- :key: '8'
  :contents: 'The format is as follows:'
  :translated_contents: ''
  :original_contents: 'The format is as follows: '
- :key: '9'
  :contents: edb_notranlate_0
  :translated_contents: ''
  :original_contents: " edb_notranlate_0  "
- :key: '10'
  :contents: 'Assuming that file was named `cluster.yml`, you then apply it with the
    following:'
  :translated_contents: ''
  :original_contents: 'Assuming that file was named `cluster.yml`, you then apply
    it with the following: '
- :key: '11'
  :contents: edb_notranlate_1
  :translated_contents: ''
  :original_contents: " edb_notranlate_1  "
- :key: '12'
  :contents: If the cluster name isn't already defined in the DCS, this also initializes
    that value.
  :translated_contents: ''
  :original_contents: 'If the cluster name isn''t already defined in the DCS, this
    also initializes that value. '
- :key: '13'
  :contents: edb_excla_notran_2 The cluster name parameter specified here always overrides
    the cluster name supplied in `config.yml`. The assumption is that the bootstrap
    file supplies all necessary elements to bootstrap a cluster or some portion of
    its larger configuration. A `config.yml` file is primarily meant to control the
    execution of HARP Manager, HARP Proxy, or `harpctl` specifically.
  :translated_contents: ''
  :original_contents: 'edb_excla_notran_2 The cluster name parameter specified here
    always overrides the cluster name supplied in `config.yml`. The assumption is
    that the bootstrap file supplies all necessary elements to bootstrap a cluster
    or some portion of its larger configuration. A `config.yml` file is primarily
    meant to control the execution of HARP Manager, HARP Proxy, or `harpctl` specifically. '
- :key: '14'
  :contents: "## Location bootstrapping"
  :translated_contents: ''
  :original_contents: "## Location bootstrapping "
- :key: '15'
  :contents: Every HARP node is associated with at most one location. This location
    can be a single data center, a grouped region consisting of multiple underlying
    servers, an Amazon availability zone, and so on. This is a logical structure that
    allows HARP to group nodes together such that only one represents the nodes in
    that location as the lead master.
  :translated_contents: ''
  :original_contents: 'Every HARP node is associated with at most one location. This
    location can be a single data center, a grouped region consisting of multiple
    underlying servers, an Amazon availability zone, and so on. This is a logical
    structure that allows HARP to group nodes together such that only one represents
    the nodes in that location as the lead master. '
- :key: '16'
  :contents: 'Thus it is necessary to initialize one or more locations. The format
    for this is as follows:'
  :translated_contents: ''
  :original_contents: 'Thus it is necessary to initialize one or more locations. The
    format for this is as follows: '
- :key: '17'
  :contents: edb_notranlate_2
  :translated_contents: ''
  :original_contents: " edb_notranlate_2  "
- :key: '18'
  :contents: 'Assuming that file was named `locations.yml`, you then apply it with
    the following:'
  :translated_contents: ''
  :original_contents: 'Assuming that file was named `locations.yml`, you then apply
    it with the following: '
- :key: '19'
  :contents: edb_notranlate_3
  :translated_contents: ''
  :original_contents: " edb_notranlate_3  "
- :key: '20'
  :contents: When performing any manipulation of the cluster, include the name as
    a preamble so the changes are directed to the right place.
  :translated_contents: ''
  :original_contents: 'When performing any manipulation of the cluster, include the
    name as a preamble so the changes are directed to the right place. '
- :key: '21'
  :contents: 'Once locations are bootstrapped, they show up with a quick examination:'
  :translated_contents: ''
  :original_contents: 'Once locations are bootstrapped, they show up with a quick
    examination: '
- :key: '22'
  :contents: edb_notranlate_4
  :translated_contents: ''
  :original_contents: " edb_notranlate_4  "
- :key: '23'
  :contents: Both locations are recognized by HARP and available for node and proxy
    assignment.
  :translated_contents: ''
  :original_contents: 'Both locations are recognized by HARP and available for node
    and proxy assignment. '
- :key: '24'
  :contents: "## Node bootstrapping"
  :translated_contents: ''
  :original_contents: "## Node bootstrapping "
- :key: '25'
  :contents: HARP nodes exist in a named cluster and must have a designated name.  Beyond
    this, all other settings are retained in the DCS, as they are  dynamic and can
    affect how HARP interacts with them. To this end, bootstrap each node using one
    or more of the runtime directives discussed in edb_lk_asis_2 .
  :translated_contents: ''
  :original_contents: 'HARP nodes exist in a named cluster and must have a designated
    name.  Beyond this, all other settings are retained in the DCS, as they are  dynamic
    and can affect how HARP interacts with them. To this end, bootstrap each node
    using one or more of the runtime directives discussed in edb_lk_asis_2 . '
- :key: '26'
  :contents: 'While bootstrapping a node, there are a few required fields:'
  :translated_contents: ''
  :original_contents: 'While bootstrapping a node, there are a few required fields: '
- :key: '27'
  :contents: "*  `name` "
  :translated_contents: ''
  :original_contents: "* `name` "
- :key: '28'
  :contents: "*  `location` "
  :translated_contents: ''
  :original_contents: "* `location` "
- :key: '29'
  :contents: "*  `dsn` "
  :translated_contents: ''
  :original_contents: "* `dsn` "
- :key: '30'
  :contents: "*  `pg_data_dir` "
  :translated_contents: ''
  :original_contents: "* `pg_data_dir` "
- :key: '31'
  :contents: 'Everything else is optional and can depend on the cluster. Because you
    can bootstrap multiple nodes at once, the format generally fits this structure:'
  :translated_contents: ''
  :original_contents: 'Everything else is optional and can depend on the cluster.
    Because you can bootstrap multiple nodes at once, the format generally fits this
    structure: '
- :key: '32'
  :contents: edb_notranlate_5
  :translated_contents: ''
  :original_contents: " edb_notranlate_5  "
- :key: '33'
  :contents: 'Assuming that file was named `node1.yml`, you then apply it with the
    following:'
  :translated_contents: ''
  :original_contents: 'Assuming that file was named `node1.yml`, you then apply it
    with the following: '
- :key: '34'
  :contents: edb_notranlate_6
  :translated_contents: ''
  :original_contents: " edb_notranlate_6  "
- :key: '35'
  :contents: 'Once nodes are bootstrapped, they show up with a quick examination:'
  :translated_contents: ''
  :original_contents: 'Once nodes are bootstrapped, they show up with a quick examination: '
- :key: '36'
  :contents: edb_notranlate_7
  :translated_contents: ''
  :original_contents: " edb_notranlate_7  "
- :key: '37'
  :contents: "## Proxy bootstrapping"
  :translated_contents: ''
  :original_contents: "## Proxy bootstrapping "
- :key: '38'
  :contents: Unlike locations or nodes, proxies can also supply a configuration template  that
    is applied to all proxies in a location. These are stored in the DCS  under the
    `global` designation. Each proxy also requires a name to exist as an instance,
    but no further customization is needed unless some setting needs a specific override.
  :translated_contents: ''
  :original_contents: 'Unlike locations or nodes, proxies can also supply a configuration
    template  that is applied to all proxies in a location. These are stored in the
    DCS  under the `global` designation. Each proxy also requires a name to exist
    as an instance, but no further customization is needed unless some setting needs
    a specific override. '
- :key: '39'
  :contents: This is because there are likely to be multiple proxies that have the
    same default configuration settings for the cluster, and repeating these values
    for every single proxy isn't necessary.
  :translated_contents: ''
  :original_contents: 'This is because there are likely to be multiple proxies that
    have the same default configuration settings for the cluster, and repeating these
    values for every single proxy isn''t necessary. '
- :key: '40'
  :contents: 'Additionally, when bootstrapping the proxy template, define at least
    one database for connection assignments. With these notes in mind, the  format
    for this is as follows:'
  :translated_contents: ''
  :original_contents: 'Additionally, when bootstrapping the proxy template, define
    at least one database for connection assignments. With these notes in mind, the  format
    for this is as follows: '
- :key: '41'
  :contents: edb_notranlate_8
  :translated_contents: ''
  :original_contents: " edb_notranlate_8  "
- :key: '42'
  :contents: 'This configures HARP for two proxies: `proxy1` and `proxy2`. Only  `proxy2`
    has a custom `default_pool_size`, while using the global  settings otherwise.'
  :translated_contents: ''
  :original_contents: 'This configures HARP for two proxies: `proxy1` and `proxy2`.
    Only  `proxy2` has a custom `default_pool_size`, while using the global  settings
    otherwise. '
- :key: '43'
  :contents: 'Assuming that file was named `proxy.yml`, you then apply it with the
    following:'
  :translated_contents: ''
  :original_contents: 'Assuming that file was named `proxy.yml`, you then apply it
    with the following: '
- :key: '44'
  :contents: edb_notranlate_9
  :translated_contents: ''
  :original_contents: " edb_notranlate_9  "
- :key: '45'
  :contents: 'Once the proxy template is bootstrapped, it shows up with a quick  examination:'
  :translated_contents: ''
  :original_contents: 'Once the proxy template is bootstrapped, it shows up with a
    quick  examination: '
- :key: '46'
  :contents: edb_notranlate_10
  :translated_contents: ''
  :original_contents: " edb_notranlate_10  "
