---
- :key: '1'
  :contents: edb_tran_1
  :translated_contents: "`# HARP Proxy`"
  :original_contents: "`# HARP Proxy` "
- :key: '2'
  :contents: HARP Proxy is a daemon that acts as an abstraction layer between the
    client  application and Postgres. It interfaces with the consensus layer to obtain
    the  identity of the current lead master node and directs traffic to that location.  During
    a planned switchover or unplanned failover, it  redirects to the new lead master
    node as dictated by the DCS.
  :translated_contents: HARPプロキシは、クライアントアプリケーションとPostgres間の抽象化レイヤーとして機能するデーモンです。コンセンサスレイヤーとインターフェイスして、現在のリードマスターノードのIDを取得し、トラフィックをその場所に転送します。計画的なスイッチオーバーまたは計画外のフェールオーバー中に、DCSの指示に従って新しいリードマスターノードにリダイレクトします。
  :original_contents: 'HARP Proxy is a daemon that acts as an abstraction layer between
    the client  application and Postgres. It interfaces with the consensus layer to
    obtain the  identity of the current lead master node and directs traffic to that
    location.  During a planned switchover or unplanned failover, it  redirects to
    the new lead master node as dictated by the DCS. '
- :key: '3'
  :contents: You can select between edb_tran_4 or edb_tran_3 for HARP Proxy.  If you
    don't specify  a proxy type, the default is edb_tran_3. When using edb_tran_4,
    HARP Proxy is  an interface layer between the DCS and PgBouncer. As such, PgBouncer
    is a  prerequisite and must also be installed for HARP Proxy to  fully manage
    its activity.
  :translated_contents: HARPプロキシは`pgbouncer`または`builtin`から選択できます。プロキシタイプを指定しない場合、デフォルトは`builtin`です。
    `pgbouncer`を使用する場合、 HARPプロキシはDCSとPgBouncer間のインターフェイスレイヤーです。そのため、PgBouncerは前提条件であり、
    HARPプロキシがそのアクティビティを完全に管理するにはインストールする必要があります。
  :original_contents: 'You can select between `pgbouncer` or `builtin` for HARP Proxy.  If
    you don''t specify  a proxy type, the default is `builtin`. When using `pgbouncer`,
    HARP Proxy is  an interface layer between the DCS and PgBouncer. As such, PgBouncer
    is a  prerequisite and must also be installed for HARP Proxy to  fully manage
    its activity. '
- :key: '4'
  :contents: The builtin proxy doesn't require any additional software. When using
    builtin,  HARP Proxy functions as a level 4 pass-through proxy.
  :translated_contents: 組み込みプロキシには、追加のソフトウェアは必要ありません。ビルトインを使用する場合、 HARPプロキシはレベル4パススループロキシとして機能します。
  :original_contents: 'The builtin proxy doesn''t require any additional software.
    When using builtin,  HARP Proxy functions as a level 4 pass-through proxy. '
- :key: '5'
  :contents: "## Builtin proxy: how it works"
  :translated_contents: "## ビルトインプロキシ：仕組み"
  :original_contents: "## Builtin proxy: how it works "
- :key: '6'
  :contents: Upon starting, HARP Proxy listens for incoming connections on the listening  address
    and listening port specified in the bootstrap file per proxy instance.   All application
    client traffic then passes through builtin proxy into the  current lead master
    node for the location where this proxy is operating.
  :translated_contents: 起動時に、 HARPプロキシは、プロキシインスタンスごとにブートストラップファイルで指定されたリスニングアドレスとリスニングポートで着信接続を監視します。すべてのアプリケーションクライアントトラフィックは、組み込みプロキシを介して、このプロキシが動作している場所の現在のリードマスターノードに渡されます。
  :original_contents: 'Upon starting, HARP Proxy listens for incoming connections
    on the listening  address and listening port specified in the bootstrap file per
    proxy instance.   All application client traffic then passes through builtin proxy
    into the  current lead master node for the location where this proxy is operating. '
- :key: '7'
  :contents: If the lead master lease isn't set, HARP Proxy disconnects all  connection
    traffic until a new lead master is established. This also applies to circumstances
    when edb_tran_1 is used to invoke a planned transition to a new lead master. The
    disconnect is immediate.
  :translated_contents: リードマスターリースが設定されていない場合、 HARPプロキシは、新しいリードマスターが確立されるまですべての接続トラフィックを切断します。これは、`harpctl
    promote`を使用して新しいリードマスターへの計画的な移行を呼び出す場合にも適用されます。切断は即時です。
  :original_contents: 'If the lead master lease isn''t set, HARP Proxy disconnects
    all  connection traffic until a new lead master is established. This also applies
    to circumstances when `harpctl promote` is used to invoke a planned transition
    to a new lead master. The disconnect is immediate. '
- :key: '8'
  :contents: "### Configuration"
  :translated_contents: "### 構成"
  :original_contents: "### Configuration "
- :key: '9'
  :contents: Choose the built-in proxy by setting the proxy type to edb_tran_1. The
    only  other option that applies to the built-in proxy is edb_tran_3, which  specifies
    the maximum allowed client connections.  If edb_tran_3 is higher than what the
    system can handle, it is lowered to a setting that's within the capability of
    the system that the proxy is on.
  :translated_contents: プロキシタイプを`builtin`に設定して、組み込みプロキシを選択します。組み込みプロキシに適用される他の唯一のオプションは、許可されるクライアント接続の最大数を指定します。
    `max_client_conn`がシステムが処理できるものよりも高い場合、プロキシがオンになっているシステムの能力内の設定に下げられます。
  :original_contents: 'Choose the built-in proxy by setting the proxy type to `builtin`.
    The only  other option that applies to the built-in proxy is `max_client_conn`,
    which  specifies the maximum allowed client connections.  If `max_client_conn`
    is higher than what the system can handle, it is lowered to a setting that''s
    within the capability of the system that the proxy is on. '
- :key: '10'
  :contents: "## PgBouncer: how it works"
  :translated_contents: "## PgBouncer：仕組み"
  :original_contents: "## PgBouncer: how it works "
- :key: '11'
  :contents: edb_excla_notran_1 If you need more configurability of pgbouncer than
    what Harp Proxy provides, the recommended setup is to use builtin proxy and have
    pgbouncer point to it.
  :translated_contents: edb_excla_notran_1 Harp Proxyが提供するものよりも多くの構成可能性が必要な場合は、ビルトインプロキシを使用してpgbouncerがそれをポイントするように設定することをお勧めします。
  :original_contents: 'edb_excla_notran_1 If you need more configurability of pgbouncer
    than what Harp Proxy provides, the recommended setup is to use builtin proxy and
    have pgbouncer point to it. '
- :key: '12'
  :contents: Upon starting, HARP Proxy launches PgBouncer if it's not already running
    and leaves client connections paused. After, it contacts the  DCS to determine
    the identity of the lead master, configure PgBouncer to use  this as the target
    for database connections, and resume connection activity.  All application client
    traffic then passes through PgBouncer into the  current lead master node for the
    location where this proxy is operating.
  :translated_contents: HARPプロキシは、起動時にPgBouncerがまだ実行されていない場合に起動し、クライアント接続を一時停止します。その後、DCSに連絡してリードマスターのIDを判断し、これをデータベース接続のターゲットとして使用するようにPgBouncerを構成し、接続アクティビティを再開します。すべてのアプリケーションクライアントトラフィックは、PgBouncerを介して、このプロキシが動作している場所の現在のリードマスターノードに渡されます。
  :original_contents: 'Upon starting, HARP Proxy launches PgBouncer if it''s not already
    running and leaves client connections paused. After, it contacts the  DCS to determine
    the identity of the lead master, configure PgBouncer to use  this as the target
    for database connections, and resume connection activity.  All application client
    traffic then passes through PgBouncer into the  current lead master node for the
    location where this proxy is operating. '
- :key: '13'
  :contents: While PgBouncer is running, HARP Proxy checks its status based on the  edb_tran_1
    configuration setting in the DCS and stores it in the DCS for monitoring purposes.
    This configuration allows interrogation with edb_tran_2 to retrieve status of
    all configured proxies or any one proxy.
  :translated_contents: PgBouncerの実行中、 HARPプロキシはDCSの`monitor_interval`構成設定に基づいてそのステータスを確認し、監視のためにDCSに保存します。この構成により、
    `harpctl`を使用した問い合わせで、構成されているすべてのプロキシまたは1つのプロキシのステータスを取得できます。
  :original_contents: 'While PgBouncer is running, HARP Proxy checks its status based
    on the  `monitor_interval` configuration setting in the DCS and stores it in the
    DCS for monitoring purposes. This configuration allows interrogation with `harpctl`
    to retrieve status of all configured proxies or any one proxy. '
- :key: '14'
  :contents: If the lead master lease isn't set, HARP Proxy pauses all  connection
    traffic until a new lead master is established. This also applies to circumstances
    when edb_tran_1 is used to invoke a planned transition to a new lead master. It
    uses a PgBouncer edb_tran_2 command for this, so existing sessions are allowed
    to complete any pending transactions before they're held in stasis.
  :translated_contents: リードマスターリースが設定されていない場合、 HARPプロキシは新しいリードマスターが確立されるまですべての接続トラフィックを一時停止します。これは、`harpctl
    promote`を使用して新しいリードマスターへの計画的な移行を呼び出す場合にも適用されます。これにはPgBouncer `PAUSE`コマンドを使用するため、既存のセッションは保留中のトランザクションが停止する前に完了することができます。
  :original_contents: 'If the lead master lease isn''t set, HARP Proxy pauses all  connection
    traffic until a new lead master is established. This also applies to circumstances
    when `harpctl promote` is used to invoke a planned transition to a new lead master.
    It uses a PgBouncer `PAUSE` command for this, so existing sessions are allowed
    to complete any pending transactions before they''re held in stasis. '
- :key: '15'
  :contents: "### PgBouncer configuration file"
  :translated_contents: "### PgBouncer構成ファイル"
  :original_contents: "### PgBouncer configuration file "
- :key: '16'
  :contents: When HARP Proxy uses PgBouncer for connection management and redirection,  a
    edb_tran_1 file must exist. HARP Manager builds this file based on various runtime
    directives as defined in edb_lk_asis_1 .
  :translated_contents: HARPプロキシが接続管理とリダイレクトにPgBouncerを使用する場合、 `pgbouncer.ini`ファイルが存在する必要があります。
    HARPマネージャーは、 edb_lk_asis_1 で定義されているさまざまなランタイム指示子に基づいてこのファイルをビルドします。
  :original_contents: 'When HARP Proxy uses PgBouncer for connection management and
    redirection,  a `pgbouncer.ini` file must exist. HARP Manager builds this file
    based on various runtime directives as defined in edb_lk_asis_1 . '
- :key: '17'
  :contents: This file is located in the same folder as the edb_tran_1 used by HARP
    Proxy. Any PgBouncer process launched by HARP Proxy uses this configuration file,
    and you can use it for debugging or information purposes. Modifications  to this
    automatically generated edb_tran_5 file are lost any time HARP Proxy restarts,
    so use edb_tran_4 to alter these settings instead. Calling edb_tran_4 doesn't
    update the edb_tran_5 file until the proxy restarts.
  :translated_contents: このファイルは、 HARPプロキシが使用する`config.yml`と同じフォルダーにあります。 HARPプロキシによって起動されるPgBouncerプロセスはこの構成ファイルを使用し、デバッグまたは情報の目的で使用できます。この自動的に生成された`pgbouncer.ini`ファイルへの変更は、
    HARPプロキシが再起動するたびに失われるため、代わりに `harpctl set proxy` を使用します。 `harpctl set proxy`を呼び出しても、プロキシが再起動するまで`pgbouncer.ini`ファイルは更新されません。
  :original_contents: 'This file is located in the same folder as the `config.yml`
    used by HARP Proxy. Any PgBouncer process launched by HARP Proxy uses this configuration
    file, and you can use it for debugging or information purposes. Modifications  to
    this automatically generated `pgbouncer.ini` file are lost any time HARP Proxy
    restarts, so use `harpctl set proxy` to alter these settings instead. Calling
    `harpctl set proxy` doesn''t update the `pgbouncer.ini` file until the proxy restarts. '
- :key: '18'
  :contents: "### Disabling and reenabling HARP Proxy node management"
  :translated_contents: "### HARPプロキシノード管理の無効化と再有効化"
  :original_contents: "### Disabling and reenabling HARP Proxy node management "
- :key: '19'
  :contents: You can temporarily pause HARP Proxy control of PgBouncer. This  results
    in a state where the daemon continues running but doesn't perform any  operations
    that can affect existing behavior of the cluster. Reenabling  management causes
    it to resume operation.
  :translated_contents: PgBouncerのHARPプロキシ制御を一時的に一時停止できます。これにより、デーモンの実行は継続されますが、クラスターの既存の動作に影響を与える可能性のある操作は実行されません。管理を再度有効にすると、操作が再開されます。
  :original_contents: 'You can temporarily pause HARP Proxy control of PgBouncer.
    This  results in a state where the daemon continues running but doesn''t perform
    any  operations that can affect existing behavior of the cluster. Reenabling  management
    causes it to resume operation. '
- :key: '20'
  :contents: 'An example of temporarily disabling management of a specific proxy is:'
  :translated_contents: 特定のプロキシの管理を一時的に無効にする例は次のとおりです。
  :original_contents: 'An example of temporarily disabling management of a specific
    proxy is: '
- :key: '21'
  :contents: edb_notranlate_0
  :translated_contents: edb_notranlate_0
  :original_contents: " edb_notranlate_0  "
- :key: '22'
  :contents: See edb_lk_asis_2  for more details.
  :translated_contents: 詳細については、edb_lk_asis_2を参照してください。
  :original_contents: 'See edb_lk_asis_2  for more details. '
- :key: '23'
  :contents: Proxy node management is enabled by default.
  :translated_contents: プロキシノード管理はデフォルトで有効になっています。
  :original_contents: 'Proxy node management is enabled by default. '
- :key: '24'
  :contents: "### Passthrough user authentication"
  :translated_contents: "### パススルーユーザー認証"
  :original_contents: "### Passthrough user authentication "
- :key: '25'
  :contents: With pgbouncer, we strongly recommend configuring HARP Proxy to use the
    edb_tran_1 and  edb_tran_2 runtime directives. If these aren't set, the PgBouncer  edb_tran_3
    file must include username and password hash combinations for  every user PgBouncer
    needs to authenticate on behalf of Postgres.
  :translated_contents: pgbouncerでは、 `auth_user`および`auth_query`ランタイム指示子を使用するようにHARPプロキシを構成することを強くお勧めします。これらが設定されていない場合、PgBouncer
    `userlist.txt`ファイルには、PgBouncerがPostgresに代わって認証する必要があるすべてのユーザーのユーザー名とパスワードのハッシュの組み合わせを含める必要があります。
  :original_contents: 'With pgbouncer, we strongly recommend configuring HARP Proxy
    to use the `auth_user` and  `auth_query` runtime directives. If these aren''t
    set, the PgBouncer  `userlist.txt` file must include username and password hash
    combinations for  every user PgBouncer needs to authenticate on behalf of Postgres. '
- :key: '26'
  :contents: Do *not* use the edb_tran_1 user, as this this is used by HARP  Proxy
    as an admin-level user to operate the underlying PgBouncer  service.
  :translated_contents: "`pgbouncer`ユーザーは使用しないでください。これは、基になるPgBouncerサービスを操作するための管理レベルのユーザーとしてHARPプロキシによって使用されます。"
  :original_contents: 'Do *not* use the `pgbouncer` user, as this this is used by
    HARP  Proxy as an admin-level user to operate the underlying PgBouncer  service. '
- :key: '27'
  :contents: "### Configuration"
  :translated_contents: "### 構成"
  :original_contents: "### Configuration "
- :key: '28'
  :contents: 'HARP Proxy expects the edb_tran_1, edb_tran_2, and edb_tran_3 configuration
    stanzas. The  following is a functional example:'
  :translated_contents: HARPプロキシは、 `dcs`、`cluster`、および`proxy`構成スタンザを想定しています。以下は機能的な例です。
  :original_contents: 'HARP Proxy expects the `dcs`, `cluster`, and `proxy` configuration
    stanzas. The  following is a functional example: '
- :key: '29'
  :contents: edb_notranlate_1  Each proxy connects to the DCS to retrieve the hosts
    and ports to listen on for connections.
  :translated_contents: edb_notranlate_1 各プロキシはDCSに接続して、接続をリッスンするホストとポートを取得します。
  :original_contents: " edb_notranlate_1  Each proxy connects to the DCS to retrieve
    the hosts and ports to listen on for connections. "
- :key: '30'
  :contents: "### Usage"
  :translated_contents: "### 使用法"
  :original_contents: "### Usage "
- :key: '31'
  :contents: 'This is the basic usage for HARP Proxy:'
  :translated_contents: これは、 HARPプロキシの基本的な使用法です。
  :original_contents: 'This is the basic usage for HARP Proxy: '
- :key: '32'
  :contents: edb_notranlate_2
  :translated_contents: edb_notranlate_2
  :original_contents: " edb_notranlate_2  "
- :key: '33'
  :contents: There are no arguments to launch edb_tran_1 as a forked daemon.  This
    software is designed to be launched through systemd or in a container  as a top-level
    process. This also means output is directed to STDOUT and STDERR for capture and
    access through journald or an attached container terminal.
  :translated_contents: "`harp-proxy`をフォークされたデーモンとして起動するための引数はありません。このソフトウェアは、systemdまたはコンテナ内でトップレベルプロセスとして起動されるように設計されています。これは、journaldまたは接続されたコンテナターミナルを介したキャプチャとアクセスのために、出力がSTDOUTおよびSTDERRに送られることも意味します。"
  :original_contents: 'There are no arguments to launch `harp-proxy` as a forked daemon.  This
    software is designed to be launched through systemd or in a container  as a top-level
    process. This also means output is directed to STDOUT and STDERR for capture and
    access through journald or an attached container terminal. '
